(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const s=(e,t)=>{const r=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),c=Math.floor(Math.max(Math.abs(e),Math.abs(t))),o=Math.random()*(c-r+1)+r;return Math.floor(o)},E=(e,t)=>{const r=[];return function(){let c=s(e,t);if(r.length>=t-e+1)return null;for(;r.includes(c);)c=s(e,t);return r.push(c),c}},m=e=>e[s(0,e.length-1)],P=e=>e.key==="Escape",g=e=>document.getElementById(e).content.firstElementChild,M=25,b=["Поймала дзен.","Да, да! В это зеркало я буду фоткаться до тех пор, пока не состарюсь.","Любимая работа","Знали бы вы, что у меня на уме.","Моя жизнь меняется, потому что меняю ее я.","Ох, и достанется кому-то такая красота!","Я, снова я и опять я.","Я не одна на миллион, я одна из 8 миллиардов.","Оставлю за собой право не соответствовать вашим ожиданиям."],v=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],q=["Аристотель","Гамлет ","Ляля","Олимпия","Данте","Боян","Кекс"],L=E(1,1e5),k=()=>({id:L(),avatar:`img/avatar-${s(1,6)}.svg`,message:Array.from({length:s(1,2)},()=>m(v)).join(" "),name:m(q)}),O=(e,t)=>({id:++t,url:`photos/${t}.jpg`,description:m(b),likes:s(15,200),comments:Array.from({length:s(4,15)},k)}),p=Array.from({length:M},O),T=e=>p.find(t=>t.id===e),D=5,a=document.querySelector(".comments-loader"),I=document.querySelector(".social__comment-count"),h=document.querySelector(".social__comments"),N=g("usersComments");let d=null,u=0;const A=({avatar:e,name:t,message:r})=>{const c=N.cloneNode(!0),o=c.querySelector(".social__picture");return o.src=e,o.alt=t,c.querySelector(".social__text").textContent=r,c},w=e=>{d=()=>{let t=u+D;const r=t>=e.length;t=r?e.length:t;const c=e.slice(u,t),o=document.createDocumentFragment();for(const n of c)o.appendChild(A(n));I.textContent=`${t} из ${e.length} комментариев`,h.appendChild(o),u=t,a.hidden=r},a.addEventListener("click",d),a.click()},B=()=>{h.innerHTML="",u=0,a.removeEventListener("click",d)},f=document.body,l=f.querySelector(".big-picture"),F=l.querySelector(".big-picture__img img"),R=l.querySelector(".social__caption"),x=l.querySelector(".likes-count"),K=l.querySelector(".big-picture__cancel"),y=e=>{P(e)&&(e.preventDefault(),_())},$=e=>{F.src=e.url,x.textContent=e.likes,R.textContent=e.description,w(e.comments)},C=(e=!0)=>{l.classList.toggle("hidden",!e),f.classList.toggle("modal-open",e)},j=e=>{e.preventDefault();const t=parseInt(e.currentTarget.dataset.id,10),r=T(t);$(r),C(!0),document.addEventListener("keydown",y)};function _(){C(!1),document.removeEventListener("keydown",y),B()}K.addEventListener("click",_);const V=document.querySelector(".pictures"),z=g("picture"),S=document.createDocumentFragment(),G=({url:e,likes:t,comments:r,id:c,description:o},n)=>{const i=n.querySelector(".picture__img");i.src=e,i.alt=o,n.querySelector(".picture__likes").textContent=t,n.querySelector(".picture__comments").textContent=r.length,n.dataset.id=c};for(const e of p){const t=z.cloneNode(!0);G(e,t),t.addEventListener("click",j),S.appendChild(t)}V.appendChild(S);

(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))x(P);new MutationObserver(P=>{for(const M of P)if(M.type==="childList")for(const z of M.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&x(z)}).observe(document,{childList:!0,subtree:!0});function l(P){const M={};return P.integrity&&(M.integrity=P.integrity),P.referrerPolicy&&(M.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?M.credentials="include":P.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function x(P){if(P.ep)return;P.ep=!0;const M=l(P);fetch(P.href,M)}})();const it=i=>i.key==="Escape",Ue=i=>document.querySelector(`#${i}`).content.firstElementChild,qe=(i,f=!0)=>{i.classList.toggle("hidden",!f),document.body.classList.toggle("modal-open",f)},rt=(i,f)=>{if(!i.classList.length)return null;const l=i.classList[0];return i.querySelector(`.${l}__${f}`)};function Yr(i,f=500){let l;return(...x)=>{clearTimeout(l),l=setTimeout(()=>i.apply(this,x),f)}}var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nt={},Qr={get exports(){return nt},set exports(i){nt=i}};(function(i,f){(function(l,x){i.exports=x()})(Ht,function(){var l={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match"}};function x(w,g){for(;(w=w.parentElement)&&!w.classList.contains(g););return w}function P(w){var g=arguments;return this.replace(/\${([^{}]*)}/g,function(L,v){return g[v]})}function M(w){return w.pristine.self.form.querySelectorAll('input[name="'+w.getAttribute("name")+'"]:checked').length}function z(w,g){for(var L in g)L in w||(w[L]=g[L]);return w}var oe={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},le="pristine-error",He="input:not([type^=hidden]):not([type^=submit]), select, textarea",Ne=["required","min","max","minlength","maxlength","pattern"],ee=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,_e=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,te="en",ce={},J=function(g,L){L.name=g,L.priority===void 0&&(L.priority=1),ce[g]=L};J("text",{fn:function(g){return!0},priority:0}),J("required",{fn:function(g){return this.type==="radio"||this.type==="checkbox"?M(this):g!==void 0&&g!==""},priority:99,halt:!0}),J("email",{fn:function(g){return!g||ee.test(g)}}),J("number",{fn:function(g){return!g||!isNaN(parseFloat(g))},priority:2}),J("integer",{fn:function(g){return!g||/^\d+$/.test(g)}}),J("minlength",{fn:function(g,L){return!g||g.length>=parseInt(L)}}),J("maxlength",{fn:function(g,L){return!g||g.length<=parseInt(L)}}),J("min",{fn:function(g,L){return!g||(this.type==="checkbox"?M(this)>=parseInt(L):parseFloat(g)>=parseFloat(L))}}),J("max",{fn:function(g,L){return!g||(this.type==="checkbox"?M(this)<=parseInt(L):parseFloat(g)<=parseFloat(L))}}),J("pattern",{fn:function(g,L){var v=L.match(new RegExp("^/(.*?)/([gimy]*)$"));return!g||new RegExp(v[1],v[2]).test(g)}}),J("equals",{fn:function(g,L){var v=document.querySelector(L);return v&&(!g&&!v.value||v.value===g)}});function N(w,g,L){var v=this;pe(w,g,L);function pe(d,E,A){d.setAttribute("novalidate","true"),v.form=d,v.config=z(E||{},oe),v.live=A!==!1,v.fields=Array.from(d.querySelectorAll(He)).map(function(b){var T=[],O={},G={};return[].forEach.call(b.attributes,function(W){if(/^data-pristine-/.test(W.name)){var ne=W.name.substr(14),ve=ne.match(_e);if(ve!==null){var Ce=ve[1]===void 0?"en":ve[1];G.hasOwnProperty(Ce)||(G[Ce]={}),G[Ce][ne.slice(0,ne.length-ve[0].length)]=W.value;return}ne==="type"&&(ne=W.value),be(T,O,ne,W.value)}else~Ne.indexOf(W.name)?be(T,O,W.name,W.value):W.name==="type"&&be(T,O,W.value)}),T.sort(function(W,ne){return ne.priority-W.priority}),v.live&&b.addEventListener(~["radio","checkbox"].indexOf(b.getAttribute("type"))?"change":"input",function(W){v.validate(W.target)}.bind(v)),b.pristine={input:b,validators:T,params:O,messages:G,self:v}}.bind(v))}function be(d,E,A,b){var T=ce[A];if(T&&(d.push(T),b)){var O=A==="pattern"?[b]:b.split(",");O.unshift(null),E[A]=O}}v.validate=function(d,E){E=d&&E===!0||d===!0;var A=v.fields;d!==!0&&d!==!1&&(d instanceof HTMLElement?A=[d.pristine]:(d instanceof NodeList||d instanceof(window.$||Array)||d instanceof Array)&&(A=Array.from(d).map(function(G){return G.pristine})));for(var b=!0,T=0;A[T];T++){var O=A[T];ye(O)?!E&&ue(O):(b=!1,!E&&Ae(O))}return b},v.getErrors=function(d){if(!d){for(var E=[],A=0;A<v.fields.length;A++){var b=v.fields[A];b.errors.length&&E.push({input:b.input,errors:b.errors})}return E}return d.tagName&&d.tagName.toLowerCase()==="select"?d.pristine.errors:d.length?d[0].pristine.errors:d.pristine.errors};function ye(d){for(var E=[],A=!0,b=0;d.validators[b];b++){var T=d.validators[b],O=d.params[T.name]?d.params[T.name]:[];if(O[0]=d.input.value,!T.fn.apply(d.input,O)&&(A=!1,typeof T.msg=="function"?E.push(T.msg(d.input.value,O)):typeof T.msg=="string"?E.push(P.apply(T.msg,O)):T.msg===Object(T.msg)&&T.msg[te]?E.push(P.apply(T.msg[te],O)):d.messages[te]&&d.messages[te][T.name]?E.push(P.apply(d.messages[te][T.name],O)):l[te]&&l[te][T.name]&&E.push(P.apply(l[te][T.name],O)),T.halt===!0))break}return d.errors=E,A}v.addValidator=function(d,E,A,b,T){d instanceof HTMLElement?(d.pristine.validators.push({fn:E,msg:A,priority:b,halt:T}),d.pristine.validators.sort(function(O,G){return G.priority-O.priority})):console.warn("The parameter elem must be a dom element")};function he(d){if(d.errorElements)return d.errorElements;var E=x(d.input,v.config.classTo),A=null,b=null;return v.config.classTo===v.config.errorTextParent?A=E:A=E.querySelector("."+v.config.errorTextParent),A&&(b=A.querySelector("."+le),b||(b=document.createElement(v.config.errorTextTag),b.className=le+" "+v.config.errorTextClass,A.appendChild(b),b.pristineDisplay=b.style.display)),d.errorElements=[E,b]}function Ae(d){var E=he(d),A=E[0],b=E[1];A&&(A.classList.remove(v.config.successClass),A.classList.add(v.config.errorClass)),b&&(b.innerHTML=d.errors.join("<br/>"),b.style.display=b.pristineDisplay||"")}v.addError=function(d,E){d=d.length?d[0]:d,d.pristine.errors.push(E),Ae(d.pristine)};function Ie(d){var E=he(d),A=E[0],b=E[1];return A&&(A.classList.remove(v.config.errorClass),A.classList.remove(v.config.successClass)),b&&(b.innerHTML="",b.style.display="none"),E}function ue(d){var E=Ie(d)[0];E&&E.classList.add(v.config.successClass)}return v.reset=function(){for(var d=0;v.fields[d];d++)v.fields[d].errorElements=null;Array.from(v.form.querySelectorAll("."+le)).map(function(E){E.parentNode.removeChild(E)}),Array.from(v.form.querySelectorAll("."+v.config.classTo)).map(function(E){E.classList.remove(v.config.successClass),E.classList.remove(v.config.errorClass)})},v.destroy=function(){v.reset(),v.fields.forEach(function(d){delete d.input.pristine}),v.fields=[]},v.setGlobalConfig=function(d){oe=d},v}return N.addValidator=function(w,g,L,v,pe){J(w,{fn:g,msg:L,priority:v,halt:pe})},N.addMessages=function(w,g){var L=l.hasOwnProperty(w)?l[w]:l[w]={};Object.keys(g).forEach(function(v,pe){L[v]=g[v]})},N.setLocale=function(w){te=w},N})})(Qr);const en=nt,Z=document.querySelector(".img-upload__form"),xe=document.querySelector(".img-upload__preview img"),Nt=Z.hashtags,tn=Z.description,rn=20,nn=5,sn={classTo:"text__hashtags__label",errorTextParent:"text__hashtags__label",errorTextClass:"hashtags__error"},an=/^#[a-zа-яё0-9]*$/i;let me="Default error";const on=i=>{if(i==="")return!0;const f=i.trim().toLocaleLowerCase().split(" ");return f.length>nn?(me="Нельзя указать больше пяти хэш-тегов",!1):f.length!==new Set(f).size?(me="Один и тот же хэш-тег не может быть использован дважды",!1):f.every(l=>l[0]!=="#"?(me="Хэштег должен начинаться с #",!1):l.length>rn?(me="Максимальная длина одного хэш-тега 20 символов, включая решётку",!1):l.length===1?(me="Хэштег не может состоять только из одной решётки",!1):an.test(l)?!0:(me="Хэштег должен состоять из букв и цифр; не может содержать пробелы, спецсимволы (#, @, $ и т. п.), символы пунктуации (тире, дефис, запятая и т. п.), эмодзи и т. д.",!1))},at=new en(Z,sn);at.addValidator(Nt,on,()=>me);const ln=()=>at.validate(),cn=()=>at.reset(),ot=25,Mt=ot,Vt=100,un=Z.querySelector(".scale__control--smaller"),fn=Z.querySelector(".scale__control--bigger"),It=Z.scale;let Fe=parseInt(It.value,10);const dn=Fe,lt=i=>{xe.style.transform=`scale(${i/100})`,It.value=`${i}%`,Fe=i},mn=()=>{let i=Fe-ot;i<Mt&&(i=Mt),lt(i)},pn=()=>{let i=Fe+ot;i>Vt&&(i=Vt),lt(i)};un.addEventListener("click",mn);fn.addEventListener("click",pn);const hn=()=>lt(dn);var Ve={},vn={get exports(){return Ve},set exports(i){Ve=i}};(function(i,f){(function(l,x){x(f)})(Ht,function(l){l.PipsMode=void 0,function(r){r.Range="range",r.Steps="steps",r.Positions="positions",r.Count="count",r.Values="values"}(l.PipsMode||(l.PipsMode={})),l.PipsType=void 0,function(r){r[r.None=-1]="None",r[r.NoValue=0]="NoValue",r[r.LargeValue=1]="LargeValue",r[r.SmallValue=2]="SmallValue"}(l.PipsType||(l.PipsType={}));function x(r){return P(r)&&typeof r.from=="function"}function P(r){return typeof r=="object"&&typeof r.to=="function"}function M(r){r.parentElement.removeChild(r)}function z(r){return r!=null}function oe(r){r.preventDefault()}function le(r){return r.filter(function(e){return this[e]?!1:this[e]=!0},{})}function He(r,e){return Math.round(r/e)*e}function Ne(r,e){var o=r.getBoundingClientRect(),m=r.ownerDocument,p=m.documentElement,_=L(m);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(_.x=0),e?o.top+_.y-p.clientTop:o.left+_.x-p.clientLeft}function ee(r){return typeof r=="number"&&!isNaN(r)&&isFinite(r)}function _e(r,e,o){o>0&&(N(r,e),setTimeout(function(){w(r,e)},o))}function te(r){return Math.max(Math.min(r,100),0)}function ce(r){return Array.isArray(r)?r:[r]}function J(r){r=String(r);var e=r.split(".");return e.length>1?e[1].length:0}function N(r,e){r.classList&&!/\s/.test(e)?r.classList.add(e):r.className+=" "+e}function w(r,e){r.classList&&!/\s/.test(e)?r.classList.remove(e):r.className=r.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function g(r,e){return r.classList?r.classList.contains(e):new RegExp("\\b"+e+"\\b").test(r.className)}function L(r){var e=window.pageXOffset!==void 0,o=(r.compatMode||"")==="CSS1Compat",m=e?window.pageXOffset:o?r.documentElement.scrollLeft:r.body.scrollLeft,p=e?window.pageYOffset:o?r.documentElement.scrollTop:r.body.scrollTop;return{x:m,y:p}}function v(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function pe(){var r=!1;try{var e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,e)}catch{}return r}function be(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function ye(r,e){return 100/(e-r)}function he(r,e,o){return e*100/(r[o+1]-r[o])}function Ae(r,e){return he(r,r[0]<0?e+Math.abs(r[0]):e-r[0],0)}function Ie(r,e){return e*(r[1]-r[0])/100+r[0]}function ue(r,e){for(var o=1;r>=e[o];)o+=1;return o}function d(r,e,o){if(o>=r.slice(-1)[0])return 100;var m=ue(o,r),p=r[m-1],_=r[m],C=e[m-1],U=e[m];return C+Ae([p,_],o)/ye(C,U)}function E(r,e,o){if(o>=100)return r.slice(-1)[0];var m=ue(o,e),p=r[m-1],_=r[m],C=e[m-1],U=e[m];return Ie([p,_],(o-C)*ye(C,U))}function A(r,e,o,m){if(m===100)return m;var p=ue(m,r),_=r[p-1],C=r[p];return o?m-_>(C-_)/2?C:_:e[p-1]?r[p-1]+He(m-r[p-1],e[p-1]):m}var b=function(){function r(e,o,m){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[m||!1],this.xNumSteps=[!1],this.snap=o;var p,_=[];for(Object.keys(e).forEach(function(C){_.push([ce(e[C]),C])}),_.sort(function(C,U){return C[0][0]-U[0][0]}),p=0;p<_.length;p++)this.handleEntryPoint(_[p][1],_[p][0]);for(this.xNumSteps=this.xSteps.slice(0),p=0;p<this.xNumSteps.length;p++)this.handleStepPoint(p,this.xNumSteps[p])}return r.prototype.getDistance=function(e){for(var o=[],m=0;m<this.xNumSteps.length-1;m++)o[m]=he(this.xVal,e,m);return o},r.prototype.getAbsoluteDistance=function(e,o,m){var p=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[p+1];)p++;else e===this.xPct[this.xPct.length-1]&&(p=this.xPct.length-2);!m&&e===this.xPct[p+1]&&p++,o===null&&(o=[]);var _,C=1,U=o[p],y=0,Y=0,re=0,$=0;for(m?_=(e-this.xPct[p])/(this.xPct[p+1]-this.xPct[p]):_=(this.xPct[p+1]-e)/(this.xPct[p+1]-this.xPct[p]);U>0;)y=this.xPct[p+1+$]-this.xPct[p+$],o[p+$]*C+100-_*100>100?(Y=y*_,C=(U-100*_)/o[p+$],_=1):(Y=o[p+$]*y/100*C,C=0),m?(re=re-Y,this.xPct.length+$>=1&&$--):(re=re+Y,this.xPct.length-$>=1&&$++),U=o[p+$]*C;return e+re},r.prototype.toStepping=function(e){return e=d(this.xVal,this.xPct,e),e},r.prototype.fromStepping=function(e){return E(this.xVal,this.xPct,e)},r.prototype.getStep=function(e){return e=A(this.xPct,this.xSteps,this.snap,e),e},r.prototype.getDefaultStep=function(e,o,m){var p=ue(e,this.xPct);return(e===100||o&&e===this.xPct[p-1])&&(p=Math.max(p-1,1)),(this.xVal[p]-this.xVal[p-1])/m},r.prototype.getNearbySteps=function(e){var o=ue(e,this.xPct);return{stepBefore:{startValue:this.xVal[o-2],step:this.xNumSteps[o-2],highestStep:this.xHighestCompleteStep[o-2]},thisStep:{startValue:this.xVal[o-1],step:this.xNumSteps[o-1],highestStep:this.xHighestCompleteStep[o-1]},stepAfter:{startValue:this.xVal[o],step:this.xNumSteps[o],highestStep:this.xHighestCompleteStep[o]}}},r.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(J);return Math.max.apply(null,e)},r.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},r.prototype.convert=function(e){return this.getStep(this.toStepping(e))},r.prototype.handleEntryPoint=function(e,o){var m;if(e==="min"?m=0:e==="max"?m=100:m=parseFloat(e),!ee(m)||!ee(o[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(m),this.xVal.push(o[0]);var p=Number(o[1]);m?this.xSteps.push(isNaN(p)?!1:p):isNaN(p)||(this.xSteps[0]=p),this.xHighestCompleteStep.push(0)},r.prototype.handleStepPoint=function(e,o){if(o){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=he([this.xVal[e],this.xVal[e+1]],o,0)/ye(this.xPct[e],this.xPct[e+1]);var m=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],p=Math.ceil(Number(m.toFixed(3))-1),_=this.xVal[e]+this.xNumSteps[e]*p;this.xHighestCompleteStep[e]=_}},r}(),T={to:function(r){return r===void 0?"":r.toFixed(2)},from:Number},O={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},G={tooltips:".__tooltips",aria:".__aria"};function W(r,e){if(!ee(e))throw new Error("noUiSlider: 'step' is not numeric.");r.singleStep=e}function ne(r,e){if(!ee(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");r.keyboardPageMultiplier=e}function ve(r,e){if(!ee(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");r.keyboardMultiplier=e}function Ce(r,e){if(!ee(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");r.keyboardDefaultStep=e}function nr(r,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");r.spectrum=new b(e,r.snap||!1,r.singleStep)}function sr(r,e){if(e=ce(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");r.handles=e.length,r.start=e}function ir(r,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");r.snap=e}function ar(r,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");r.animate=e}function or(r,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");r.animationDuration=e}function lr(r,e){var o=[!1],m;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(m=1;m<r.handles;m++)o.push(e);o.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==r.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");o=e}r.connect=o}function cr(r,e){switch(e){case"horizontal":r.ort=0;break;case"vertical":r.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function pt(r,e){if(!ee(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(r.margin=r.spectrum.getDistance(e))}function ur(r,e){if(!ee(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(r.limit=r.spectrum.getDistance(e),!r.limit||r.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function fr(r,e){var o;if(!ee(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||ee(e[0])||ee(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),r.padding=[r.spectrum.getDistance(e[0]),r.spectrum.getDistance(e[1])],o=0;o<r.spectrum.xNumSteps.length-1;o++)if(r.padding[0][o]<0||r.padding[1][o]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var m=e[0]+e[1],p=r.spectrum.xVal[0],_=r.spectrum.xVal[r.spectrum.xVal.length-1];if(m/(_-p)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function dr(r,e){switch(e){case"ltr":r.dir=0;break;case"rtl":r.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function mr(r,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var o=e.indexOf("tap")>=0,m=e.indexOf("drag")>=0,p=e.indexOf("fixed")>=0,_=e.indexOf("snap")>=0,C=e.indexOf("hover")>=0,U=e.indexOf("unconstrained")>=0,y=e.indexOf("drag-all")>=0,Y=e.indexOf("smooth-steps")>=0;if(p){if(r.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");pt(r,r.start[1]-r.start[0])}if(U&&(r.margin||r.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");r.events={tap:o||_,drag:m,dragAll:y,smoothSteps:Y,fixed:p,snap:_,hover:C,unconstrained:U}}function pr(r,e){if(e!==!1)if(e===!0||P(e)){r.tooltips=[];for(var o=0;o<r.handles;o++)r.tooltips.push(e)}else{if(e=ce(e),e.length!==r.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(m){if(typeof m!="boolean"&&!P(m))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),r.tooltips=e}}function hr(r,e){if(e.length!==r.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");r.handleAttributes=e}function vr(r,e){if(!P(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");r.ariaFormat=e}function gr(r,e){if(!x(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");r.format=e}function Sr(r,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");r.keyboardSupport=e}function Er(r,e){r.documentElement=e}function br(r,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");r.cssPrefix=e}function yr(r,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof r.cssPrefix=="string"?(r.cssClasses={},Object.keys(e).forEach(function(o){r.cssClasses[o]=r.cssPrefix+e[o]})):r.cssClasses=e}function ht(r){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:T,format:T},o={step:{r:!1,t:W},keyboardPageMultiplier:{r:!1,t:ne},keyboardMultiplier:{r:!1,t:ve},keyboardDefaultStep:{r:!1,t:Ce},start:{r:!0,t:sr},connect:{r:!0,t:lr},direction:{r:!0,t:dr},snap:{r:!1,t:ir},animate:{r:!1,t:ar},animationDuration:{r:!1,t:or},range:{r:!0,t:nr},orientation:{r:!1,t:cr},margin:{r:!1,t:pt},limit:{r:!1,t:ur},padding:{r:!1,t:fr},behaviour:{r:!0,t:mr},ariaFormat:{r:!1,t:vr},format:{r:!1,t:gr},tooltips:{r:!1,t:pr},keyboardSupport:{r:!0,t:Sr},documentElement:{r:!1,t:Er},cssPrefix:{r:!0,t:br},cssClasses:{r:!0,t:yr},handleAttributes:{r:!1,t:hr}},m={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:O,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};r.format&&!r.ariaFormat&&(r.ariaFormat=r.format),Object.keys(o).forEach(function(y){if(!z(r[y])&&m[y]===void 0){if(o[y].r)throw new Error("noUiSlider: '"+y+"' is required.");return}o[y].t(e,z(r[y])?r[y]:m[y])}),e.pips=r.pips;var p=document.createElement("div"),_=p.style.msTransform!==void 0,C=p.style.transform!==void 0;e.transformRule=C?"transform":_?"msTransform":"webkitTransform";var U=[["left","top"],["right","bottom"]];return e.style=U[e.dir][e.ort],e}function Cr(r,e,o){var m=v(),p=be(),_=p&&pe(),C=r,U,y,Y,re,$,k=e.spectrum,se=[],H=[],Q=[],je=0,ie={},ge=r.ownerDocument,Te=e.documentElement||ge.documentElement,Le=ge.body,xr=ge.dir==="rtl"||e.ort===1?0:100;function ae(t,n){var s=ge.createElement("div");return n&&N(s,n),t.appendChild(s),s}function Pr(t,n){var s=ae(t,e.cssClasses.origin),a=ae(s,e.cssClasses.handle);if(ae(a,e.cssClasses.touchArea),a.setAttribute("data-handle",String(n)),e.keyboardSupport&&(a.setAttribute("tabindex","0"),a.addEventListener("keydown",function(c){return Ir(c,n)})),e.handleAttributes!==void 0){var u=e.handleAttributes[n];Object.keys(u).forEach(function(c){a.setAttribute(c,u[c])})}return a.setAttribute("role","slider"),a.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),n===0?N(a,e.cssClasses.handleLower):n===e.handles-1&&N(a,e.cssClasses.handleUpper),s.handle=a,s}function gt(t,n){return n?ae(t,e.cssClasses.connect):!1}function _r(t,n){var s=ae(n,e.cssClasses.connects);y=[],Y=[],Y.push(gt(s,t[0]));for(var a=0;a<e.handles;a++)y.push(Pr(n,a)),Q[a]=a,Y.push(gt(s,t[a+1]))}function Ar(t){N(t,e.cssClasses.target),e.dir===0?N(t,e.cssClasses.ltr):N(t,e.cssClasses.rtl),e.ort===0?N(t,e.cssClasses.horizontal):N(t,e.cssClasses.vertical);var n=getComputedStyle(t).direction;return n==="rtl"?N(t,e.cssClasses.textDirectionRtl):N(t,e.cssClasses.textDirectionLtr),ae(t,e.cssClasses.base)}function Tr(t,n){return!e.tooltips||!e.tooltips[n]?!1:ae(t.firstChild,e.cssClasses.tooltip)}function St(){return C.hasAttribute("disabled")}function ze(t){var n=y[t];return n.hasAttribute("disabled")}function Lr(t){t!=null?(y[t].setAttribute("disabled",""),y[t].handle.removeAttribute("tabindex")):(C.setAttribute("disabled",""),y.forEach(function(n){n.handle.removeAttribute("tabindex")}))}function kr(t){t!=null?(y[t].removeAttribute("disabled"),y[t].handle.setAttribute("tabindex","0")):(C.removeAttribute("disabled"),y.forEach(function(n){n.removeAttribute("disabled"),n.handle.setAttribute("tabindex","0")}))}function $e(){$&&(we("update"+G.tooltips),$.forEach(function(t){t&&M(t)}),$=null)}function Et(){$e(),$=y.map(Tr),Xe("update"+G.tooltips,function(t,n,s){if(!(!$||!e.tooltips)&&$[n]!==!1){var a=t[n];e.tooltips[n]!==!0&&(a=e.tooltips[n].to(s[n])),$[n].innerHTML=a}})}function Dr(){we("update"+G.aria),Xe("update"+G.aria,function(t,n,s,a,u){Q.forEach(function(c){var S=y[c],h=ke(H,c,0,!0,!0,!0),R=ke(H,c,100,!0,!0,!0),V=u[c],q=String(e.ariaFormat.to(s[c]));h=k.fromStepping(h).toFixed(1),R=k.fromStepping(R).toFixed(1),V=k.fromStepping(V).toFixed(1),S.children[0].setAttribute("aria-valuemin",h),S.children[0].setAttribute("aria-valuemax",R),S.children[0].setAttribute("aria-valuenow",V),S.children[0].setAttribute("aria-valuetext",q)})})}function Mr(t){if(t.mode===l.PipsMode.Range||t.mode===l.PipsMode.Steps)return k.xVal;if(t.mode===l.PipsMode.Count){if(t.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=t.values-1,s=100/n,a=[];n--;)a[n]=n*s;return a.push(100),bt(a,t.stepped)}return t.mode===l.PipsMode.Positions?bt(t.values,t.stepped):t.mode===l.PipsMode.Values?t.stepped?t.values.map(function(u){return k.fromStepping(k.getStep(k.toStepping(u)))}):t.values:[]}function bt(t,n){return t.map(function(s){return k.fromStepping(n?k.getStep(s):s)})}function Vr(t){function n(V,q){return Number((V+q).toFixed(7))}var s=Mr(t),a={},u=k.xVal[0],c=k.xVal[k.xVal.length-1],S=!1,h=!1,R=0;return s=le(s.slice().sort(function(V,q){return V-q})),s[0]!==u&&(s.unshift(u),S=!0),s[s.length-1]!==c&&(s.push(c),h=!0),s.forEach(function(V,q){var F,D,j,X=V,B=s[q+1],K,Je,Qe,et,Lt,tt,kt,Dt=t.mode===l.PipsMode.Steps;for(Dt&&(F=k.xNumSteps[q]),F||(F=B-X),B===void 0&&(B=X),F=Math.max(F,1e-7),D=X;D<=B;D=n(D,F)){for(K=k.toStepping(D),Je=K-R,Lt=Je/(t.density||1),tt=Math.round(Lt),kt=Je/tt,j=1;j<=tt;j+=1)Qe=R+j*kt,a[Qe.toFixed(5)]=[k.fromStepping(Qe),0];et=s.indexOf(D)>-1?l.PipsType.LargeValue:Dt?l.PipsType.SmallValue:l.PipsType.NoValue,!q&&S&&D!==B&&(et=0),D===B&&h||(a[K.toFixed(5)]=[D,et]),R=K}}),a}function Or(t,n,s){var a,u,c=ge.createElement("div"),S=(a={},a[l.PipsType.None]="",a[l.PipsType.NoValue]=e.cssClasses.valueNormal,a[l.PipsType.LargeValue]=e.cssClasses.valueLarge,a[l.PipsType.SmallValue]=e.cssClasses.valueSub,a),h=(u={},u[l.PipsType.None]="",u[l.PipsType.NoValue]=e.cssClasses.markerNormal,u[l.PipsType.LargeValue]=e.cssClasses.markerLarge,u[l.PipsType.SmallValue]=e.cssClasses.markerSub,u),R=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],V=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];N(c,e.cssClasses.pips),N(c,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function q(D,j){var X=j===e.cssClasses.value,B=X?R:V,K=X?S:h;return j+" "+B[e.ort]+" "+K[D]}function F(D,j,X){if(X=n?n(j,X):X,X!==l.PipsType.None){var B=ae(c,!1);B.className=q(X,e.cssClasses.marker),B.style[e.style]=D+"%",X>l.PipsType.NoValue&&(B=ae(c,!1),B.className=q(X,e.cssClasses.value),B.setAttribute("data-value",String(j)),B.style[e.style]=D+"%",B.innerHTML=String(s.to(j)))}}return Object.keys(t).forEach(function(D){F(D,t[D][0],t[D][1])}),c}function Be(){re&&(M(re),re=null)}function Ge(t){Be();var n=Vr(t),s=t.filter,a=t.format||{to:function(u){return String(Math.round(u))}};return re=C.appendChild(Or(n,s,a)),re}function yt(){var t=U.getBoundingClientRect(),n="offset"+["Width","Height"][e.ort];return e.ort===0?t.width||U[n]:t.height||U[n]}function fe(t,n,s,a){var u=function(S){var h=Rr(S,a.pageOffset,a.target||n);if(!h||St()&&!a.doNotReject||g(C,e.cssClasses.tap)&&!a.doNotReject||t===m.start&&h.buttons!==void 0&&h.buttons>1||a.hover&&h.buttons)return!1;_||h.preventDefault(),h.calcPoint=h.points[e.ort],s(h,a)},c=[];return t.split(" ").forEach(function(S){n.addEventListener(S,u,_?{passive:!0}:!1),c.push([S,u])}),c}function Rr(t,n,s){var a=t.type.indexOf("touch")===0,u=t.type.indexOf("mouse")===0,c=t.type.indexOf("pointer")===0,S=0,h=0;if(t.type.indexOf("MSPointer")===0&&(c=!0),t.type==="mousedown"&&!t.buttons&&!t.touches)return!1;if(a){var R=function(F){var D=F.target;return D===s||s.contains(D)||t.composed&&t.composedPath().shift()===s};if(t.type==="touchstart"){var V=Array.prototype.filter.call(t.touches,R);if(V.length>1)return!1;S=V[0].pageX,h=V[0].pageY}else{var q=Array.prototype.find.call(t.changedTouches,R);if(!q)return!1;S=q.pageX,h=q.pageY}}return n=n||L(ge),(u||c)&&(S=t.clientX+n.x,h=t.clientY+n.y),t.pageOffset=n,t.points=[S,h],t.cursor=u||c,t}function Ct(t){var n=t-Ne(U,e.ort),s=n*100/yt();return s=te(s),e.dir?100-s:s}function Ur(t){var n=100,s=!1;return y.forEach(function(a,u){if(!ze(u)){var c=H[u],S=Math.abs(c-t),h=S===100&&n===100,R=S<n,V=S<=n&&t>c;(R||V||h)&&(s=u,n=S)}}),s}function qr(t,n){t.type==="mouseout"&&t.target.nodeName==="HTML"&&t.relatedTarget===null&&Ke(t,n)}function Fr(t,n){if(navigator.appVersion.indexOf("MSIE 9")===-1&&t.buttons===0&&n.buttonsProperty!==0)return Ke(t,n);var s=(e.dir?-1:1)*(t.calcPoint-n.startCalcPoint),a=s*100/n.baseSize;wt(s>0,a,n.locations,n.handleNumbers,n.connect)}function Ke(t,n){n.handle&&(w(n.handle,e.cssClasses.active),je-=1),n.listeners.forEach(function(s){Te.removeEventListener(s[0],s[1])}),je===0&&(w(C,e.cssClasses.drag),Ye(),t.cursor&&(Le.style.cursor="",Le.removeEventListener("selectstart",oe))),e.events.smoothSteps&&(n.handleNumbers.forEach(function(s){de(s,H[s],!0,!0,!1,!1)}),n.handleNumbers.forEach(function(s){I("update",s)})),n.handleNumbers.forEach(function(s){I("change",s),I("set",s),I("end",s)})}function We(t,n){if(!n.handleNumbers.some(ze)){var s;if(n.handleNumbers.length===1){var a=y[n.handleNumbers[0]];s=a.children[0],je+=1,N(s,e.cssClasses.active)}t.stopPropagation();var u=[],c=fe(m.move,Te,Fr,{target:t.target,handle:s,connect:n.connect,listeners:u,startCalcPoint:t.calcPoint,baseSize:yt(),pageOffset:t.pageOffset,handleNumbers:n.handleNumbers,buttonsProperty:t.buttons,locations:H.slice()}),S=fe(m.end,Te,Ke,{target:t.target,handle:s,listeners:u,doNotReject:!0,handleNumbers:n.handleNumbers}),h=fe("mouseout",Te,qr,{target:t.target,handle:s,listeners:u,doNotReject:!0,handleNumbers:n.handleNumbers});u.push.apply(u,c.concat(S,h)),t.cursor&&(Le.style.cursor=getComputedStyle(t.target).cursor,y.length>1&&N(C,e.cssClasses.drag),Le.addEventListener("selectstart",oe,!1)),n.handleNumbers.forEach(function(R){I("start",R)})}}function Hr(t){t.stopPropagation();var n=Ct(t.calcPoint),s=Ur(n);s!==!1&&(e.events.snap||_e(C,e.cssClasses.tap,e.animationDuration),de(s,n,!0,!0),Ye(),I("slide",s,!0),I("update",s,!0),e.events.snap?We(t,{handleNumbers:[s]}):(I("change",s,!0),I("set",s,!0)))}function Nr(t){var n=Ct(t.calcPoint),s=k.getStep(n),a=k.fromStepping(s);Object.keys(ie).forEach(function(u){u.split(".")[0]==="hover"&&ie[u].forEach(function(c){c.call(Me,a)})})}function Ir(t,n){if(St()||ze(n))return!1;var s=["Left","Right"],a=["Down","Up"],u=["PageDown","PageUp"],c=["Home","End"];e.dir&&!e.ort?s.reverse():e.ort&&!e.dir&&(a.reverse(),u.reverse());var S=t.key.replace("Arrow",""),h=S===u[0],R=S===u[1],V=S===a[0]||S===s[0]||h,q=S===a[1]||S===s[1]||R,F=S===c[0],D=S===c[1];if(!V&&!q&&!F&&!D)return!0;t.preventDefault();var j;if(q||V){var X=V?0:1,B=Tt(n),K=B[X];if(K===null)return!1;K===!1&&(K=k.getDefaultStep(H[n],V,e.keyboardDefaultStep)),R||h?K*=e.keyboardPageMultiplier:K*=e.keyboardMultiplier,K=Math.max(K,1e-7),K=(V?-1:1)*K,j=se[n]+K}else D?j=e.spectrum.xVal[e.spectrum.xVal.length-1]:j=e.spectrum.xVal[0];return de(n,k.toStepping(j),!0,!0),I("slide",n),I("update",n),I("change",n),I("set",n),!1}function jr(t){t.fixed||y.forEach(function(n,s){fe(m.start,n.children[0],We,{handleNumbers:[s]})}),t.tap&&fe(m.start,U,Hr,{}),t.hover&&fe(m.move,U,Nr,{hover:!0}),t.drag&&Y.forEach(function(n,s){if(!(n===!1||s===0||s===Y.length-1)){var a=y[s-1],u=y[s],c=[n],S=[a,u],h=[s-1,s];N(n,e.cssClasses.draggable),t.fixed&&(c.push(a.children[0]),c.push(u.children[0])),t.dragAll&&(S=y,h=Q),c.forEach(function(R){fe(m.start,R,We,{handles:S,handleNumbers:h,connect:n})})}})}function Xe(t,n){ie[t]=ie[t]||[],ie[t].push(n),t.split(".")[0]==="update"&&y.forEach(function(s,a){I("update",a)})}function zr(t){return t===G.aria||t===G.tooltips}function we(t){var n=t&&t.split(".")[0],s=n?t.substring(n.length):t;Object.keys(ie).forEach(function(a){var u=a.split(".")[0],c=a.substring(u.length);(!n||n===u)&&(!s||s===c)&&(!zr(c)||s===c)&&delete ie[a]})}function I(t,n,s){Object.keys(ie).forEach(function(a){var u=a.split(".")[0];t===u&&ie[a].forEach(function(c){c.call(Me,se.map(e.format.to),n,se.slice(),s||!1,H.slice(),Me)})})}function ke(t,n,s,a,u,c,S){var h;return y.length>1&&!e.events.unconstrained&&(a&&n>0&&(h=k.getAbsoluteDistance(t[n-1],e.margin,!1),s=Math.max(s,h)),u&&n<y.length-1&&(h=k.getAbsoluteDistance(t[n+1],e.margin,!0),s=Math.min(s,h))),y.length>1&&e.limit&&(a&&n>0&&(h=k.getAbsoluteDistance(t[n-1],e.limit,!1),s=Math.min(s,h)),u&&n<y.length-1&&(h=k.getAbsoluteDistance(t[n+1],e.limit,!0),s=Math.max(s,h))),e.padding&&(n===0&&(h=k.getAbsoluteDistance(0,e.padding[0],!1),s=Math.max(s,h)),n===y.length-1&&(h=k.getAbsoluteDistance(100,e.padding[1],!0),s=Math.min(s,h))),S||(s=k.getStep(s)),s=te(s),s===t[n]&&!c?!1:s}function Ze(t,n){var s=e.ort;return(s?n:t)+", "+(s?t:n)}function wt(t,n,s,a,u){var c=s.slice(),S=a[0],h=e.events.smoothSteps,R=[!t,t],V=[t,!t];a=a.slice(),t&&a.reverse(),a.length>1?a.forEach(function(F,D){var j=ke(c,F,c[F]+n,R[D],V[D],!1,h);j===!1?n=0:(n=j-c[F],c[F]=j)}):R=V=[!0];var q=!1;a.forEach(function(F,D){q=de(F,s[F]+n,R[D],V[D],!1,h)||q}),q&&(a.forEach(function(F){I("update",F),I("slide",F)}),u!=null&&I("drag",S))}function xt(t,n){return e.dir?100-t-n:t}function $r(t,n){H[t]=n,se[t]=k.fromStepping(n);var s=xt(n,0)-xr,a="translate("+Ze(s+"%","0")+")";y[t].style[e.transformRule]=a,Pt(t),Pt(t+1)}function Ye(){Q.forEach(function(t){var n=H[t]>50?-1:1,s=3+(y.length+n*t);y[t].style.zIndex=String(s)})}function de(t,n,s,a,u,c){return u||(n=ke(H,t,n,s,a,!1,c)),n===!1?!1:($r(t,n),!0)}function Pt(t){if(Y[t]){var n=0,s=100;t!==0&&(n=H[t-1]),t!==Y.length-1&&(s=H[t]);var a=s-n,u="translate("+Ze(xt(n,a)+"%","0")+")",c="scale("+Ze(a/100,"1")+")";Y[t].style[e.transformRule]=u+" "+c}}function _t(t,n){return t===null||t===!1||t===void 0||(typeof t=="number"&&(t=String(t)),t=e.format.from(t),t!==!1&&(t=k.toStepping(t)),t===!1||isNaN(t))?H[n]:t}function De(t,n,s){var a=ce(t),u=H[0]===void 0;n=n===void 0?!0:n,e.animate&&!u&&_e(C,e.cssClasses.tap,e.animationDuration),Q.forEach(function(h){de(h,_t(a[h],h),!0,!1,s)});var c=Q.length===1?0:1;if(u&&k.hasNoSize()&&(s=!0,H[0]=0,Q.length>1)){var S=100/(Q.length-1);Q.forEach(function(h){H[h]=h*S})}for(;c<Q.length;++c)Q.forEach(function(h){de(h,H[h],!0,!0,s)});Ye(),Q.forEach(function(h){I("update",h),a[h]!==null&&n&&I("set",h)})}function Br(t){De(e.start,t)}function Gr(t,n,s,a){if(t=Number(t),!(t>=0&&t<Q.length))throw new Error("noUiSlider: invalid handle number, got: "+t);de(t,_t(n,t),!0,!0,a),I("update",t),s&&I("set",t)}function At(t){if(t===void 0&&(t=!1),t)return se.length===1?se[0]:se.slice(0);var n=se.map(e.format.to);return n.length===1?n[0]:n}function Kr(){for(we(G.aria),we(G.tooltips),Object.keys(e.cssClasses).forEach(function(t){w(C,e.cssClasses[t])});C.firstChild;)C.removeChild(C.firstChild);delete C.noUiSlider}function Tt(t){var n=H[t],s=k.getNearbySteps(n),a=se[t],u=s.thisStep.step,c=null;if(e.snap)return[a-s.stepBefore.startValue||null,s.stepAfter.startValue-a||null];u!==!1&&a+u>s.stepAfter.startValue&&(u=s.stepAfter.startValue-a),a>s.thisStep.startValue?c=s.thisStep.step:s.stepBefore.step===!1?c=!1:c=a-s.stepBefore.highestStep,n===100?u=null:n===0&&(c=null);var S=k.countStepDecimals();return u!==null&&u!==!1&&(u=Number(u.toFixed(S))),c!==null&&c!==!1&&(c=Number(c.toFixed(S))),[c,u]}function Wr(){return Q.map(Tt)}function Xr(t,n){var s=At(),a=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];a.forEach(function(c){t[c]!==void 0&&(o[c]=t[c])});var u=ht(o);a.forEach(function(c){t[c]!==void 0&&(e[c]=u[c])}),k=u.spectrum,e.margin=u.margin,e.limit=u.limit,e.padding=u.padding,e.pips?Ge(e.pips):Be(),e.tooltips?Et():$e(),H=[],De(z(t.start)?t.start:s,n)}function Zr(){U=Ar(C),_r(e.connect,U),jr(e.events),De(e.start),e.pips&&Ge(e.pips),e.tooltips&&Et(),Dr()}Zr();var Me={destroy:Kr,steps:Wr,on:Xe,off:we,get:At,set:De,setHandle:Gr,reset:Br,disable:Lr,enable:kr,__moveHandles:function(t,n,s){wt(t,n,H,s)},options:o,updateOptions:Xr,target:C,removePips:Be,removeTooltips:$e,getPositions:function(){return H.slice()},getTooltips:function(){return $},getOrigins:function(){return y},pips:Ge};return Me}function vt(r,e){if(!r||!r.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+r);if(r.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var o=ht(e),m=Cr(r,o,e);return r.noUiSlider=m,m}var wr={__spectrum:b,cssClasses:O,create:vt};l.create=vt,l.cssClasses=O,l.default=wr,Object.defineProperty(l,"__esModule",{value:!0})})})(vn,Ve);const gn=Jr(Ve);const Ot=Oe(0,1,.1),Rt=Oe(0,100,1),ct={none:{slider:Rt},chrome:{filter:i=>`grayscale(${i})`,slider:Ot},sepia:{filter:i=>`sepia(${i})`,slider:{...Ot}},marvin:{filter:i=>`invert(${i}%)`,slider:{...Rt}},phobos:{filter:i=>`blur(${i}px)`,slider:Oe(0,3,.1)},heat:{filter:i=>`brightness(${i})`,slider:Oe(1,3,.1)}};function Oe(i,f,l,x=f){return{range:{min:i,max:f},start:x,step:l}}const Sn=new Event("change"),ut=Z.querySelector(".img-upload__effect-level"),En=ut.querySelector(".effect-level__slider"),jt=Z.querySelector(".img-upload__effects"),Pe=Z.effect,bn=Z["effect-level"];ut.hidden=!0;const ft=gn.create(En,ct[Pe.value].slider),yn=()=>{const i=Pe.value;ut.hidden=i==="none",xe.className=`effects__preview--${Pe.value}`,ft.updateOptions(ct[i].slider)},Cn=()=>{const i=ft.get(),{filter:f}=ct[Pe.value];f?xe.style.filter=f(i):xe.style.removeProperty("filter"),bn.value=i};jt.addEventListener("change",yn);ft.on("update",Cn);const wn=()=>{Pe[0].checked=!0,jt.dispatchEvent(Sn)},zt=Ue("success"),xn=Ue("error"),Pn=5e3,$t=(i=zt)=>{const f=i.cloneNode(!0),l=rt(f,"button");document.body.appendChild(f);const x=()=>{f.removeEventListener("click",P),document.removeEventListener("keydown",M,{capture:!0}),f.remove()};f.addEventListener("click",P),document.addEventListener("keydown",M,{capture:!0});function P(z){const oe=z.target===f,le=z.target===l;(oe||le)&&x()}function M(z){it(z)&&(z.preventDefault(),z.stopPropagation(),x())}return setTimeout(x,Pn),f},_n=()=>$t(zt),Bt=i=>{const f=$t(xn);if(i){const l=rt(f,"button"),x=rt(f,"title");x.textContent=i.title,l.addEventListener("click",i.ctaCallback)}},An="https://28.javascript.pages.academy/kekstagram",Gt={GET_DATA:"/data",SEND_DATA:"/"},Kt={GET:"GET",POST:"POST"},Tn={GET_DATA:"Не удалось загрузить данные. Попробуйте обновить страницу"},Wt=(i,f=Kt.GET,l=null)=>fetch(`${An}${i}`,{method:f,body:l}).then(x=>{if(!x.ok)throw new Error;return x.json()}),Xt=()=>Wt(Gt.GET_DATA).catch(()=>{Bt({title:Tn.GET_DATA,ctaCallback:()=>location.reload()})}),Ln=i=>Wt(Gt.SEND_DATA,Kt.POST,i),kn=["jpg","jpeg","png"],Dn=i=>{const f=i.files[0],l=f.name.toLowerCase();kn.some(P=>l.endsWith(P))&&(xe.src=URL.createObjectURL(f))},Zt=Z.querySelector(".img-upload__overlay"),Ut=Z.querySelector("#upload-submit"),qt=Z.filename,Mn=()=>document.activeElement===Nt||document.activeElement===tn,Yt=()=>Z.reset(),Jt=i=>{it(i)&&!Mn()&&(i.preventDefault(),Yt())};qt.addEventListener("change",()=>{qe(Zt),Dn(qt),document.addEventListener("keydown",Jt)});Z.addEventListener("reset",()=>{qe(Zt,!1),document.removeEventListener("keydown",Jt),cn(),hn(),wn()});Z.addEventListener("submit",i=>{if(i.preventDefault(),ln()){Ut.disabled=!0;const l=new FormData(i.target);Ln(l).then(()=>{Yt(),_n()}).catch(()=>Bt()).finally(()=>{Ut.disabled=!1})}});const Vn=i=>Xt().then(f=>f.find(l=>l.id===i)),On=5,dt=document.querySelector(".comments-loader"),Rn=document.querySelector(".social__comment-count"),st=document.querySelector(".social__comments"),Un=Ue("usersComments");let Se=[];const qn=({avatar:i,name:f,message:l})=>{const x=Un.cloneNode(!0),P=x.querySelector(".social__picture");return P.src=i,P.alt=f,x.querySelector(".social__text").textContent=l,x},Fn=new Intl.PluralRules("ru-RU"),Hn=i=>{switch(i){case"one":return"комментария";default:return"комментариев"}},Nn=(i,f)=>{const l=Fn.select(f),x=Hn(l);Rn.textContent=`${i} из ${f} ${x}`},In=()=>{const i=st.children.length;let f=i+On;const l=f>=Se.length;f=l?Se.length:f;const x=Se.slice(i,f),P=document.createDocumentFragment();for(const M of x)P.appendChild(qn(M));st.appendChild(P),Nn(f,Se.length),dt.hidden=l};dt.addEventListener("click",In);const jn=i=>{Se=i,dt.click()},zn=()=>{st.innerHTML="",Se=[]},Ee=document.querySelector(".big-picture"),$n=Ee.querySelector(".big-picture__img img"),Bn=Ee.querySelector(".social__caption"),Gn=Ee.querySelector(".likes-count"),Kn=Ee.querySelector(".big-picture__cancel"),Qt=i=>{it(i)&&(i.preventDefault(),Zn())},Wn=i=>{$n.src=i.url,Gn.textContent=i.likes,Bn.textContent=i.description,jn(i.comments)},Xn=async i=>{i.preventDefault();const f=parseInt(i.currentTarget.dataset.id,10),l=await Vn(f);Wn(l),qe(Ee),document.addEventListener("keydown",Qt)},er=()=>{qe(Ee,!1),document.removeEventListener("keydown",Qt),zn()};function Zn(){er()}Kn.addEventListener("click",er);const tr=document.querySelector(".pictures"),Yn=Ue("picture"),Jn=({url:i,likes:f,comments:l,id:x,description:P})=>{const M=Yn.cloneNode(!0),z=M.querySelector(".picture__img");return z.src=i,z.alt=P,M.querySelector(".picture__likes").textContent=f,M.querySelector(".picture__comments").textContent=l.length,M.dataset.id=x,M},Qn=()=>tr.querySelectorAll(".picture").forEach(i=>i.remove()),es=i=>{Qn();const f=document.createDocumentFragment();for(const l of i){const x=Jn(l);x.addEventListener("click",Xn),f.appendChild(x)}tr.appendChild(f)},Ft="img-filters__button--active",ts=10,mt=document.querySelector(".img-filters"),rs=mt.querySelectorAll(".img-filters__button"),[ns,ss,is]=rs;let Re=ns;const as=()=>Math.random()-.5,os=(i,f)=>f.comments.length-i.comments.length,ls=async()=>{const i=await Xt(),f=i&&i.length>0;switch(mt.classList.toggle("img-filters--inactive",!f),Re){case ss:return[...i].sort(as).slice(0,ts);case is:return[...i].sort(os);default:return i}},cs=i=>{Re.classList.remove(Ft),i.classList.add(Ft),Re=i},rr=async()=>es(await ls()),us=Yr(rr);mt.addEventListener("click",async i=>{const{target:f}=i;!f.classList.contains("img-filters__button")||f===Re||(cs(f),await us())});rr();

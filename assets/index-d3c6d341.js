(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const i=(e,t)=>{const n=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),c=Math.floor(Math.max(Math.abs(e),Math.abs(t))),o=Math.random()*(c-n+1)+n;return Math.floor(o)},y=(e,t)=>{const n=[];return function(){let c=i(e,t);if(n.length>=t-e+1)return null;for(;n.includes(c);)c=i(e,t);return n.push(c),c}},l=e=>e[i(0,e.length-1)],C=e=>e.key==="Escape",d=e=>document.getElementById(e).content.firstElementChild,_=25,S=["Поймала дзен.","Да, да! В это зеркало я буду фоткаться до тех пор, пока не состарюсь.","Любимая работа","Знали бы вы, что у меня на уме.","Моя жизнь меняется, потому что меняю ее я.","Ох, и достанется кому-то такая красота!","Я, снова я и опять я.","Я не одна на миллион, я одна из 8 миллиардов.","Оставлю за собой право не соответствовать вашим ожиданиям."],P=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],L=["Аристотель","Гамлет ","Ляля","Олимпия","Данте","Боян","Кекс"],b=y(1,1e5),q=()=>({id:b(),avatar:`img/avatar-${i(1,6)}.svg`,message:Array.from({length:i(1,2)},()=>l(P)).join(" "),name:l(L)}),v=(e,t)=>({id:++t,url:`photos/${t}.jpg`,description:l(S),likes:i(15,200),comments:Array.from({length:i(1,4)},q)}),m=Array.from({length:_},v),E=e=>m.find(t=>t.id===e),M=d("usersComments"),D=({avatar:e,name:t,message:n})=>{const c=M.cloneNode(!0),o=c.querySelector(".social__picture");return o.src=e,o.alt=t,c.querySelector(".social__text").textContent=n,c},s=document.querySelector(".big-picture"),O=s.querySelector(".big-picture__img img"),T=s.querySelector(".social__caption"),k=s.querySelector(".likes-count"),I=s.querySelector(".comments-count"),u=document.querySelector(".social__comments"),N=s.querySelector(".big-picture__cancel"),w=s.querySelector(".social__comment-count"),A=s.querySelector(".comments-loader"),p=document.body,h=e=>{C(e)&&(e.preventDefault(),g())},B=e=>{const t=document.createDocumentFragment();for(const n of e)t.appendChild(D(n));u.appendChild(t)},F=e=>{O.src=e.url,k.textContent=e.likes,I.textContent=e.comments.length,T.textContent=e.description,B(e.comments)},R=()=>{s.classList.remove("hidden"),w.classList.add("hidden"),A.classList.add("hidden"),p.classList.add("modal-open")},x=e=>{e.preventDefault();const t=parseInt(e.currentTarget.dataset.id,10),n=E(t);F(n),R(),document.addEventListener("keydown",h)};function g(){s.classList.add("hidden"),p.classList.remove("modal-open"),document.removeEventListener("keydown",h),u.innerHTML=""}N.addEventListener("click",g);const K=document.querySelector(".pictures"),j=d("picture"),f=document.createDocumentFragment(),V=({url:e,likes:t,comments:n,id:c,description:o},r)=>{const a=r.querySelector(".picture__img");a.src=e,a.alt=o,r.querySelector(".picture__likes").textContent=t,r.querySelector(".picture__comments").textContent=n.length,r.dataset.id=c};for(const e of m){const t=j.cloneNode(!0);V(e,t),t.addEventListener("click",x),f.appendChild(t)}K.appendChild(f);
